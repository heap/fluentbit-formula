{% from "fluent-bit/map.jinja" import fluent_bit with context -%}
[Unit]
Description=Fluent Bit
Requires=network.target
After=network.target

[Service]
Type=simple
{%- if fluent_bit.env is defined %}
# These environment variables are generated by salt.
{%- for key, value in fluent_bit.env.items() %}
Environment={{ key }}={{ value }}
{%- endfor %}
{%- endif %}
ExecStart=/usr/local/bin/fluent-bit -c /etc/fluent-bit/fluent-bit.conf -R /etc/fluent-bit/parsers.conf
Restart=always

[Install]
WantedBy=multi-user.target
